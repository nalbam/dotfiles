{
  "env": {
    "MAX_THINKING_TOKENS": "31999"
  },
  "cleanupPeriodDays": 30,
  "permissions": {
    "allow": [
      "Bash(apk:*)",
      "Bash(apt:*)",
      "Bash(argocd:*)",
      "Bash(awk:*)",
      "Bash(aws:*)",
      "Bash(brew:*)",
      "Bash(bun:*)",
      "Bash(cargo:*)",
      "Bash(cat:*)",
      "Bash(cd:*)",
      "Bash(chgrp:*)",
      "Bash(chmod:*)",
      "Bash(chown:*)",
      "Bash(cp:*)",
      "Bash(curl:*)",
      "Bash(cut:*)",
      "Bash(date:*)",
      "Bash(diff:*)",
      "Bash(do)",
      "Bash(docker:*)",
      "Bash(done)",
      "Bash(echo:*)",
      "Bash(eksctl:*)",
      "Bash(env:*)",
      "Bash(export:*)",
      "Bash(find:*)",
      "Bash(for:*)",
      "Bash(git:*)",
      "Bash(go:*)",
      "Bash(gradle:*)",
      "Bash(grep:*)",
      "Bash(head:*)",
      "Bash(helm:*)",
      "Bash(jest:*)",
      "Bash(jq:*)",
      "Bash(kill:*)",
      "Bash(kubectl:*)",
      "Bash(ln:*)",
      "Bash(ls:*)",
      "Bash(lsof:*)",
      "Bash(make:*)",
      "Bash(mkdir:*)",
      "Bash(mv:*)",
      "Bash(mvn:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(pip:*)",
      "Bash(pkill:*)",
      "Bash(pnpm:*)",
      "Bash(ps:*)",
      "Bash(pytest:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(rm:*)",
      "Bash(rsync:*)",
      "Bash(scp:*)",
      "Bash(sed:*)",
      "Bash(sort:*)",
      "Bash(ssh:*)",
      "Bash(tail:*)",
      "Bash(tar:*)",
      "Bash(terraform:*)",
      "Bash(touch:*)",
      "Bash(tsc:*)",
      "Bash(uniq:*)",
      "Bash(unzip:*)",
      "Bash(vitest:*)",
      "Bash(wc:*)",
      "Bash(wget:*)",
      "Bash(which:*)",
      "Bash(while read file)",
      "Bash(xargs:*)",
      "Bash(yarn:*)",
      "Bash(yq:*)",
      "Bash(zip:*)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:docs.aws.amazon.com)",
      "WebFetch(domain:docs.docker.com)",
      "WebFetch(domain:docs.github.com)",
      "WebFetch(domain:docs.python.org)",
      "WebFetch(domain:docs.tosspayments.com)",
      "WebFetch(domain:developer.mozilla.org)",
      "WebFetch(domain:developer.paypal.com)",
      "WebFetch(domain:go.dev)",
      "WebFetch(domain:helm.sh)",
      "WebFetch(domain:jestjs.io)",
      "WebFetch(domain:kubernetes.io)",
      "WebFetch(domain:nextjs.org)",
      "WebFetch(domain:nodejs.org)",
      "WebFetch(domain:platform.openai.com)",
      "WebFetch(domain:prisma.io)",
      "WebFetch(domain:react.dev)",
      "WebFetch(domain:tailwindcss.com)",
      "WebFetch(domain:terraform.io)",
      "WebFetch(domain:typescriptlang.org)",
      "WebFetch(domain:vercel.com)",
      "WebSearch",
      "Skill(aws-operations)",
      "Skill(docs-sync)",
      "Skill(git-workflow)",
      "Skill(k8s-troubleshoot)",
      "Skill(shell-scripting)",
      "Skill(validate)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf /*)",
      "Bash(sudo rm -rf:*)",
      "Bash(mkfs:*)",
      "Bash(dd if=/dev/zero:*)",
      "Bash(shutdown:*)",
      "Bash(reboot:*)",
      "Bash(systemctl stop:*)",
      "Bash(systemctl disable:*)",
      "Read(.env)",
      "Read(.env.*)",
      "Read(**/secrets/**)",
      "Read(**/*secret*)",
      "Read(**/*credential*)"
    ],
    "defaultMode": "acceptEdits"
  },
  "statusLine": {
    "type": "command",
    "command": "npx -y ccusage statusline",
    "padding": 0
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"git push\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\necho '[Hook] Review changes before push...' >&2\necho '[Hook] Press Enter to continue with push or Ctrl+C to abort...' >&2\nread -r"
          }
        ],
        "description": "Pause before git push to review changes"
      },
      {
        "matcher": "tool == \"Write\" && tool_input.file_path matches \"\\\\.md$\" && !(tool_input.file_path matches \"(README\\\\.md|CLAUDE\\\\.md|^docs/)\")",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ]; then\n  echo \"[Hook] WARNING: Creating documentation file outside docs/\" >&2\n  echo \"[Hook] File: $file_path\" >&2\n  echo \"[Hook] Consider moving to docs/ directory\" >&2\nfi\n\necho \"$input\""
          }
        ],
        "description": "Warn about creating documentation files outside docs/"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Bash\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\ncmd=$(echo \"$input\" | jq -r '.tool_input.command')\n\nif echo \"$cmd\" | grep -qE 'gh pr create'; then\n  output=$(echo \"$input\" | jq -r '.tool_output.output // \"\"')\n  pr_url=$(echo \"$output\" | grep -oE 'https://github.com/[^/]+/[^/]+/pull/[0-9]+')\n  \n  if [ -n \"$pr_url\" ]; then\n    echo \"[Hook] PR created: $pr_url\" >&2\n    repo=$(echo \"$pr_url\" | sed -E 's|https://github.com/([^/]+/[^/]+)/pull/[0-9]+|\\1|')\n    pr_num=$(echo \"$pr_url\" | sed -E 's|.*/pull/([0-9]+)|\\1|')\n    echo \"[Hook] To review PR: gh pr review $pr_num --repo $repo\" >&2\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Log PR URL and provide review command after PR creation"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  if command -v prettier >/dev/null 2>&1; then\n    prettier --write \"$file_path\" 2>&1 | head -5 >&2\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Auto-format JS/TS files with Prettier after edits"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  dir=$(dirname \"$file_path\")\n  project_root=\"$dir\"\n  while [ \"$project_root\" != \"/\" ] && [ ! -f \"$project_root/package.json\" ]; do\n    project_root=$(dirname \"$project_root\")\n  done\n  \n  if [ -f \"$project_root/tsconfig.json\" ]; then\n    cd \"$project_root\" && npx tsc --noEmit --pretty false 2>&1 | grep \"$file_path\" | head -10 >&2 || true\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "TypeScript check after editing .ts/.tsx files"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\n\nif git rev-parse --git-dir > /dev/null 2>&1; then\n  modified_files=$(git diff --name-only HEAD 2>/dev/null | grep -E '\\.(ts|tsx|js|jsx)$' || true)\n  \n  if [ -n \"$modified_files\" ]; then\n    has_console=false\n    while IFS= read -r file; do\n      if [ -f \"$file\" ]; then\n        if grep -q \"console\\.log\" \"$file\" 2>/dev/null; then\n          echo \"[Hook] WARNING: console.log found in $file\" >&2\n          has_console=true\n        fi\n      fi\n    done <<< \"$modified_files\"\n    \n    if [ \"$has_console\" = true ]; then\n      echo \"[Hook] Remove console.log statements before committing\" >&2\n    fi\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Final audit for console.log in modified files before session ends"
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/notify.sh"
          }
        ],
        "description": "Send notification when session stops"
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/notify.sh"
          }
        ],
        "description": "Send notification when waiting for user input"
      }
    ]
  }
}
